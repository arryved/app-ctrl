# nfpm configuration file for building package
#
# check https://nfpm.goreleaser.com/configuration for detailed usage
#
#  nfpm needed in build env: `brew install nfpm` for local dev
#
name: "app-control-api"
arch: "amd64"
platform: "linux"

# TODO - source version from env and/or generate programmatically
version: "1.0.0"
section: "default"
priority: "extra"
replaces: []

provides:
- app-control-api
depends:
- apt
recommends: []
suggests: []
conflicts: []

maintainer: "TODO(name) <todo@example.com>"
description: |
  This is an proxy/work broker for app-control, to process and delegate
  actions (status, restart, stop, start, deploy, diag, etc.)
vendor: "Arryved"
homepage: "https://arryved.pages.arryved.io/internal-documentation/groups/SRE/"
license: "none/proprietary"

contents:
- src: ./app-control-api
  dst: /usr/local/bin/app-control-api
  file_info:
    mode: 0755
    owner: root
    group: root

- src: ./systemd/app-control-api.service
  dst: /lib/systemd/system/app-control-api.service
  file_info:
    mode: 0644
    owner: root
    group: root
